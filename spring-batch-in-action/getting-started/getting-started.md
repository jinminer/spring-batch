# spring-batch-getting-started

## 1 spring batch 简介

### 1.1 什么是批处理

**批处理**是指在面对复杂的业务以及海量的数据处理时，无需人工干预，仅需定期读入批量数据，然后完成相应业务处理并进行归档操作的一系列工作

* 批处理应用的特点

  * 自动执行：根据系统设定的工作步骤自动完成
  * 数据量大：少则百万，多则千万甚至上亿
  * 定时执行：如每天执行、每周或每月执行

* 批处理流程划分

  * 读数据：数据可能来自文件、数据库或消息队列等
  * 处理数据：处理读取的数据并形成输出结果，如：银行对账系统的资金对账处理
  * 写数据：将输出结果写入文件、数据库或消息队列等

* 批处理典型应用场景：

  * 系统A从数据库读取数据，经过业务处理后，导出系统B需要的数据到文件中，系统B读取文件，经过业务处理后，最后存放在数据库中。通常情况下该工作在夜间凌晨00:00~2:00之间进行，此时对系统的性能影响最小

    ![spring-batch-scenes-1](<https://raw.githubusercontent.com/jinminer/docs/master/spring-batch/spring-batch-in-action/getting-started/1.1-spring-batch-scenes-1.png>)

### 1.2 spring batch

* spring batch 是一个轻量级的、完善的批处理框架，旨在帮助企业建立健壮、高效的批处理应用
* 通过spring batch能够支持简单、复杂以及大数据量的批处理作业
  * spring batch 提供了大量可重用的组件，包括日志、追踪、事物、任务作业统计、任务重启、跳过、重复、资源管理。
  * 对于大数据量和高性能的批处理任务，spring batch 同样提供了高级功能和特性来支持，比如分区功能、远程功能等。
* spring batch**是一个批处理应用框架，不是调度框架，但需要和调度框架合作来构建完成批处理任务**。
  * 它只关注批处理任务相关的问题，如：事物、并发、监控、执行等，并不提供相应的调度功能。
  * 如果需要使用调度框架，可以集成其他商业或开源的调度框架，如：Quartz、Tivoli、Control-M、Cron等

#### 1.2.1 典型应用场景

典型的批处理应用通常从数据库、文件或队列中读取数据，之后使用一些方法处理数据(如：抽取、分析、处理、过滤等)，最终使用修改过的格式将数据写回目标系统。通常在一个无需用户交互的离线环境下，spring batch 能够自动进行基本的批处理迭代，也能够为一个数据集提供事物保证。

* spring batch支持的业务场景：
  * 定期提交批处理任务
  * 并行批处理，即并行处理任务
  * 企业消息驱动处理
  * 大规模的并行处理
  * 手动或定时重启
  * 安顺序处理依赖的任务（可扩展为工作流驱动的批处理）
  * 部分处理：如在回滚时忽略记录
  * 完整的批处理事物
* spring batch技术目标
  * 利用spring编程模型，使程序员专注于业务处理，让spring框架管理流程
  * 明确分离批处理的执行环境和应用
  * 将通用核心的服务以接口形式提供
  * 提供开箱即用的简单的、默认的核心执行接口
  * 提供spring框架中配置、自定义和扩展服务
  * 所有默认实现的核心服务能够容易地被扩展与替换，不会影响基础层
  * 提供一个简单地部署模式，如使用Maven进行编译

#### 1.2.2 spring batch 架构



![](https://raw.githubusercontent.com/jinminer/docs/master/spring-batch/spring-batch-in-action/getting-started/1.2.2-spring-batch-core-structure-1.png)



* spring batch 核心架构分为三层：
  * 应用层：包含所有地批处理作业，通过spring框架管理开发人员自定义地代码
  * 核心层：spring batch 启动和控制所需要的核心类，如 `JobLauncher`、`Job`、`step`等
  * 基础架构层：
    * 提供底层通用的读-`ItemReader`、写-`ItemWriter`和服务处理（如：`RetryTemplate`-重试模板、`RepeatTemplate`-重复模板等，可以被应用层和核心层使用）；应用层和核心层建立在基础架构层之上。
    * spring batch的三层体系架构都可以进行独立水平扩展，并且不会对其他层级造成影响



### spring batch 优势

spring batch 框架通过提供丰富的即开即用的组件和高可用性、高扩展性的能力，使得开发批处理应用的人员专注于业务的处理，提升批处理应用的开发效率，通过spring batch 可以快速地构建出轻量级地、健壮地并行处理应用























































































